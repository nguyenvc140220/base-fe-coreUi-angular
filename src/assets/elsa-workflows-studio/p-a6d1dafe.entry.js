import{r as s,h as e}from"./p-ee0b9025.js";import"./p-f3f2f442.js";import{E as t}from"./p-9f020d74.js";import{e as a}from"./p-d17a08e5.js";import{a as i}from"./p-4e7382b2.js";import"./p-6f3ac5fa.js";import"./p-82db2ff5.js";import"./p-949334ec.js";import{T as l}from"./p-6b50e59c.js";import"./p-e0c1fede.js";import"./p-f1ec68ec.js";import"./p-a3b5bd35.js";import"./p-80de33dc.js";import"./p-83f217d4.js";let r=class{constructor(e){s(this,e),this.editorHeight="6em",this.singleLineMode=!1,this.activityValidatingContext=null,this.configureComponentCustomButtonContext=null}async componentWillLoad(){this.currentValue=this.propertyModel.expressions.Literal,await this.configureComponentCustomButton(),this.validate(this.currentValue)}async componentDidLoad(){const s=await i(this.serverUrl),e={propertyName:this.propertyDescriptor.name,activityTypeName:this.activityModel.type},t=await s.scriptingApi.getJavaScriptTypeDefinitions(this.workflowDefinitionId,e);await this.monacoEditor.addJavaScriptLib(t,"defaultLib:lib.es6.d.ts")}async configureComponentCustomButton(){this.configureComponentCustomButtonContext={component:"elsa-script-property",activityType:this.activityModel.type,prop:this.propertyDescriptor.name,data:null},await a.emit(t.ComponentLoadingCustomButton,this,this.configureComponentCustomButtonContext)}mapSyntaxToLanguage(s){switch(s){case"JavaScript":return"javascript";case"Liquid":return"handlebars";case"Literal":default:return"plaintext"}}onComponentCustomButtonClick(s){s.preventDefault(),a.emit(t.ComponentCustomButtonClick,this,{component:"elsa-script-property",activityType:this.activityModel.type,prop:this.propertyDescriptor.name,params:null})}onMonacoValueChanged(s){this.currentValue=s.value,this.validate(this.currentValue)}validate(s){this.activityValidatingContext={activityType:this.activityModel.type,prop:this.propertyDescriptor.name,value:s,data:null,isValidated:!1,isValid:!1},a.emit(t.ActivityPluginValidating,this,this.activityValidatingContext)}render(){const s=this.propertyDescriptor,t=this.syntax,a=this.mapSyntaxToLanguage(t),i=s.name,l=i,r=s.hint,o=this.currentValue;return e("div",null,e("div",{class:"elsa-flex"},e("div",{class:""},e("label",{htmlFor:i,class:"elsa-block elsa-text-sm elsa-font-medium elsa-text-gray-700"},s.label||i)),e("div",{class:"elsa-flex-1"},e("div",null,e("div",{class:"hidden sm:elsa-block"},e("nav",{class:"elsa-flex elsa-flex-row-reverse","aria-label":"Tabs"},e("span",{class:"elsa-bg-blue-100 elsa-text-blue-700 elsa-px-3 elsa-py-2 elsa-font-medium elsa-text-sm elsa-rounded-md"},t)))))),e("div",{class:"elsa-mt-1"},e("elsa-monaco",{value:o,language:a,"editor-height":this.editorHeight,"single-line":this.singleLineMode,onValueChanged:s=>this.onMonacoValueChanged(s.detail),ref:s=>this.monacoEditor=s})),r?e("p",{class:"elsa-mt-2 elsa-text-sm elsa-text-gray-500"},r):void 0,e("input",{type:"hidden",name:l,value:o}),(()=>{if(null!=this.activityValidatingContext&&this.activityValidatingContext.isValidated)return e("div",{class:"elsa-mt-3"},e("p",{class:`elsa-mt-1 elsa-text-sm elsa-text-${this.activityValidatingContext.isValid?"green":"red"}-500`},this.activityValidatingContext.data))})(),(()=>{if(null!=this.configureComponentCustomButtonContext.data)return e("div",{class:"elsa-mt-3"},e("a",{href:"#",onClick:s=>this.onComponentCustomButtonClick(s),class:"elsa-relative elsa-inline-flex elsa-items-center elsa-px-4 elsa-py-2 elsa-border elsa-border-gray-300 elsa-text-sm elsa-leading-5 elsa-font-medium elsa-rounded-md elsa-text-gray-700 elsa-bg-white hover:elsa-text-gray-500 focus:elsa-outline-none focus:elsa-shadow-outline-blue focus:elsa-border-blue-300 active:elsa-bg-gray-100 active:elsa-text-gray-700 elsa-transition elsa-ease-in-out elsa-duration-150"},this.configureComponentCustomButtonContext.data.label))})())}};l.injectProps(r,["serverUrl","workflowDefinitionId"]);export{r as elsa_script_property}