<div>

  <div class="card">
    <div class="card-body">
      <button pButton type="button" label="Thêm mới" icon="pi pi-plus" class="p-button-text"></button>
    </div>
  </div>

  <div class="card mt-6">
    <div class="card-body">
      <div>
        <div class="max-w-full">
          <span class="p-input-icon-left w-full">
            <i class="pi pi-search"></i>
            <input class="w-full p-inputtext-sm"
                   pInputText
                   [(ngModel)]="searchKey"
                   (keydown.enter)="loadData()"
                   placeholder="Tìm kiếm theo tên, ID"
                   type="text">
          </span>
        </div>
      </div>

      <div class="mt-3">
        <p-table [scrollable]="true"
                 [tableStyle]="{'min-width': '50rem'}"
                 [value]="primengTableHelper.records"
                 [loading]="primengTableHelper.isLoading"
                 [paginator]="false"
                 [autoLayout]="true"
                 [lazy]="true"
                 scrollHeight="50vh">
          <ng-template pTemplate="header">
            <tr>
              <th *ngFor="let col of cols" style="min-width:300px">
                {{col.header}}
              </th>
            </tr>
          </ng-template>
          <ng-template let-segmentation pTemplate="body">
            <tr>
              <ng-container *ngFor="let col of cols;" [ngSwitch]="col.field" class="text-center">
                <td *ngSwitchCase="'action'" [style]="segmentation[col.field]?.styles || {}">
                  <i class="pi pi-file-edit pr-5"></i>
                  <i class="pi pi-copy pr-5"></i>
                  <i class="pi pi-times pr-5"></i>
                </td>

                <td *ngSwitchCase="'creationTime'" [style]="segmentation[col.field]?.styles || {}">
                  {{ segmentation[col.field] && (segmentation[col.field] | date: 'dd/MM/yyyy HH:mm:ss') }}
                </td>

                <td *ngSwitchCase="'lastModificationTime'" [style]="segmentation[col.field]?.styles || {}">
                  {{ segmentation[col.field] && (segmentation[col.field] | date: 'dd/MM/yyyy HH:mm:ss') }}
                </td>

                <td *ngSwitchDefault
                    class="truncate"
                    [pTooltip]="segmentation[col.field]"
                    [style]="segmentation[col.field]?.styles || {}">
                  {{segmentation[col.field]}}
                </td>
              </ng-container>
            </tr>
          </ng-template>
        </p-table>
        <div class="flex primeng-paging-container mt-3">
          <div class="font-bold">
            Tổng: {{(primengTableHelper.totalRecordsCount)}}
          </div>
          <div class="grow">
            <p-paginator
              #paginator
              (onPageChange)="paginate($event)"
              [rowsPerPageOptions]="primengTableHelper.predefinedRecordsCountPerPage"
              [rows]="primengTableHelper.defaultRecordsCountPerPage"
              [totalRecords]="primengTableHelper.totalRecordsCount">
            </p-paginator>
          </div>
        </div>
      </div>
    </div>

  </div>
</div>
<p-toast autoZIndex="true"></p-toast>
